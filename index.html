<!DOCTYPE html>
<html lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Navajo Nation Water Quality</title>
    <meta charset="UTF-8">
    <!--Stylesheets-->
    <link rel="stylesheet" type="text/css" href="css/dc.css">
    <link rel="stylesheet" type="text/css" href="css/leaflet.css">
    <link rel="stylesheet" type="text/css" href="css/bootstrap.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/MarkerCluster.css">
    <link rel="stylesheet" type="text/css" href="css/MarkerCluster.Default.css">
    <!--Scripts-->
    <script type="text/javascript" src="js/jquery-3.5.1.min.js"></script>
    <script type="text/javascript" src="js/leaflet.js"></script>
    <script type="text/javascript" src="js/leaflet.markercluster.js"></script>
    <script type="text/javascript" src="js/main.js"></script>
    <script type="text/javascript" src="js/nnWells.js"></script>
    <script type="text/javascript" src="js/d3.js"></script>
    <script type="text/javascript" src="js/crossfilter.js"></script>
    <script type="text/javascript" src="js/dc.js"></script>
    <script type="text/javascript" src="js/underscore-min.js"></script>

    <script src="js/nnWells.js"></script>

</head>

<body>
    
    <!--Fixed position website title with counter of data records displayed-->
    <nav class="navbar navbar-default navbar-fixed-top fixed-top">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar"
                    aria-expanded="false" aria-controls="navbar">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">Unregulated Wells on the Navajo Nation</a>
            </div>
            <div id="navbar" class="navbar-collapse collapse">
                <ul class="nav navbar-nav">
                    <li><a href="https://hsc.unm.edu/pharmacy/research/areas/metals/" target="_blank">METALS Home</a>
                    </li>
                    <!-- <li><a href="#">About</a></li> -->
                    <!--<li><a href="#">Contact</a></li> -->
                </ul>
                <!--Modal Button-->
                <ul class="nav navbar-nav navbar-right">
                    <button type="button" class="btn btn-info btn-md btn-right" data-toggle="modal"
                        data-target="#myModal">
                        Data</button>
                </ul>
                
                <ul class="nav navbar-nav navbar-right">
                    <span class="filter-count">1101</span> selected out of <span class="total-count">1101</span> wells
                    <a id="all" href="#">Reset All</a>
                </ul>
            </div>
            
        </div>
    </nav>    
    <!--Map frame-->
    <div class="container">
        <div class="row">
            <div class="col-md-12">
                <div id="map"></div>
            </div>
        </div>
    </div>
    <!--Plots-->
    <div class="container-fluid">
        <span class="filter-count">1101</span> selected out of <span class="total-count">1101</span> wells
        <a id="all" href="#">Reset All</a>
        <div class="row">

            <div class="col-xs-6">
                <div class="col-xs-6">
                    <div class="dc-chart" id="histogram1"></div>
                    <h4>Histogram 1</h4><br>
                    <!--remove h1 when histogram is finished-->
                    <div class="dc-chart" id="histogram2"></div>
                    <h4>Histogram 3</h4>
                    <!--remove h1 when histogram is finished-->
                </div>
                <div class="col-xs-6">
                    <div class="dc-chart" id="histogram3"></div>
                    <h4>Histogram 2</h4><br>
                    <!--remove h1 when histogram is finished-->
                    <div class="dc-chart" id="histogram4"></div>
                    <h4>Histogram 4</h4>
                    <!--remove h1 when histogram is finished-->
                </div>
            </div>
            <!--Scatterplots-->
            <div class="col-xs-6">
                <div class="dc-correlogram" id="correlogram"></div>
                <h4>Scatterplots</h4>
            </div>
        </div>
    </div>
    <!--Data table-->
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-12">
                <table class="table table-bordered table-striped" id="data-table">
                    <h4>Data Table</h4>
                    <thead>
                        <tr class="header">
                            <th>Well_ID</th>
                            <th>Analyte1</th>
                            <th>Analyte2</th>
                            <th>Analyte3</th>
                            <th>Analyte4</th>
                        </tr>
                    </thead>
                </table>
            </div>
        </div>
    </div>

    <script>
        // create charts
        d3.json('data/nnWells.json', function (error, data) {
            var wellData = data.features;
            _.each(wellData, function (d) {
                d.count = +d.count;
                // round to the nearest 100
                d.ca = Math.floor(+d.properties.Ca / 100) * 100;

            });
            // set crossfilter
            var ndx = crossfilter(wellData);

            var caDim = ndx.dimension(function (d) { return d.properties.Ca; });
            // create groups (y-axis values)
            var countPerca = caDim.group().reduceCount();

            //specify charts
            var caCountChart = dc.barChart('#histogram1');

            caCountChart
                .width(300)
                .height(300)
                .dimension(caDim)
                .group(countPerca)
                .x(d3.scale.linear().domain([0, 976]))
                .y(d3.scale.linear().domain([0, 13]))
                .elasticY(false)
                .centerBar(true)
                .barPadding(3)
                .xAxisLabel('Calcium')
                .yAxisLabel('Quantity')
                .margins({ top: 10, right: 20, bottom: 50, left: 50 });
            caCountChart.xAxis().tickValues([0, 200, 400, 600, 800, 1000]);
            caCountChart.yAxis().tickValues([0, 3, 6, 9, 12]);

            dc.renderAll();

        });

    </script>

</body>

</html>